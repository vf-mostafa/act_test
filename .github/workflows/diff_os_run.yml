name: Run commands on different operating systems
on:
  push:
    branches: [ main ]
  pull_request:
    branches: [ main ]

jobs:
  Run-npm-on-Ubuntu:
    name: Run npm on Ubuntu
    runs-on: ubuntu-latest
    steps:
      - uses: actions/checkout@v4
      - uses: actions/setup-node@v4
        with:
          node-version: '14'
      - run: npm help
  
  Run-shell-script:
    name: Nix Shell
    runs-on: ubuntu-latest
    steps:
  # You may pin to the exact commit or the version.
  # uses: workflow/nix-shell-action@5fdff26c1325df635247f72cba79ffc370303fdb
      - uses: workflow/nix-shell-action@v3.4.0
        with:
    # Interpreter to use in the nix shell shebang
          interpreter: bash # optional, default is bash
    # Comma-separated list of packages to pre-install in your shell. Defaults to simply "bash". Cannot be used together with the flakes option
          packages: bash# optional, default is bash
    # Comma-separated list of fully qualified flakes to pre-install in your shell. Use either packages or flakes. Cannot be used together with the packages option
    #flakes: # optional, default is 
    # If set to true, uses devShell instead.
    #flakes-from-devshell: # optional
    # If set, uses a customly named devShell from the current flake
    #custom-devshell: # optional, default is 
    # The actual script to execute in the shell
          script: /bin/ls
    # Execute the script inside the specified working directory instead of the repository root. Example: path/to/dir
          #working-directory: # optional

          
  Run-PSScriptAnalyzer-on-Windows:
    name: Run PSScriptAnalyzer on Windows
    runs-on: windows-latest
    steps:
      - uses: actions/checkout@v4
      - name: Install PSScriptAnalyzer module
        shell: pwsh
        run: |
          Set-PSRepository PSGallery -InstallationPolicy Trusted
          Install-Module PSScriptAnalyzer -ErrorAction Stop
      - name: Get list of rules
        shell: pwsh
        run: |
          Get-ScriptAnalyzerRule
